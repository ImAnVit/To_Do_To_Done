<view class="container">
  <view class="header">
    <text class="title">{{language === 'en' ? 'Settings' : 'è®¾ç½®'}}</text>
  </view>

  <view class="content">
    <!-- Profile Section -->
    <view class="settings-group profile-group">
      <view class="profile-section">
        <!-- Avatar: Grey circle with blue man icon -->
        <view class="avatar-container">
          <view class="avatar-circle" bindtap="chooseAvatar">
            <image wx:if="{{avatarUrl}}" class="avatar" src="{{avatarUrl}}" mode="aspectFill"></image>
            <view wx:else class="default-avatar">
              <view class="man-icon"></view>
            </view>
          </view>
        </view>
        
        <!-- Name: Clickable for editing -->
        <view class="name-section">
          <block wx:if="{{!isEditingName}}">
            <text class="user-name" bindtap="startEditingName">{{name}}</text>
          </block>
          <block wx:else>
            <input class="name-input" value="{{customName}}" bindinput="updateName" focus="true" placeholder="{{language === 'en' ? 'Enter your name' : 'è¾“å…¥æ‚¨çš„åå­—'}}" />
            <view class="edit-buttons">
              <text class="save-btn" bindtap="saveName">
                {{language === 'en' ? 'âœ“ Save' : 'âœ“ ä¿å­˜'}}
              </text>
              <text class="cancel-btn" bindtap="cancelEditName">
                {{language === 'en' ? 'âœ• Cancel' : 'âœ• å–æ¶ˆ'}}
              </text>
            </view>
          </block>
        </view>
      </view>
    </view>

    <!-- Task Statistics Section -->
    <view class="settings-group task-stats">
      <view class="settings-item center-label">
        <text class="item-label">{{language === 'en' ? 'Tasks Overview' : 'ä»»åŠ¡æ¦‚è§ˆ'}}</text>
      </view>
      <view class="stats-container">
        <view class="stat-item">
          <text class="stat-value">{{activeTasks}}</text>
          <text class="stat-label">{{language === 'en' ? 'Active' : 'æ´»è·ƒ'}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{completedTasks}}</text>
          <text class="stat-label">{{language === 'en' ? 'Completed' : 'å·²å®Œæˆ'}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{totalTasks}}</text>
          <text class="stat-label">{{language === 'en' ? 'Total' : 'æ€»è®¡'}}</text>
        </view>
      </view>
      <view class="small-reset-button" bind:tap="resetTasks">
        <text>{{language === 'en' ? 'Reset All Tasks' : 'é‡ç½®æ‰€æœ‰ä»»åŠ¡'}}</text>
      </view>
    </view>

    <!-- App Settings Section -->
    <view class="settings-group">
      <view class="section-title">{{language === 'en' ? 'App Settings' : 'åº”ç”¨è®¾ç½®'}}</view>
      <!-- Notifications Toggle -->
      <view class="settings-item" bind:tap="toggleNotifications">
        <text class="item-label">{{language === 'en' ? 'Send Notifications' : 'å‘é€é€šçŸ¥'}}</text>
        <switch checked="{{notifications}}" color="#1296db" />
      </view>
      
      <!-- Language Selector -->
      <view class="settings-item language-item">
        <text class="setting-label">{{language === 'en' ? 'Language' : 'è¯­è¨€'}}</text>
        <view class="language-options">
          <button 
            class="language-button"
            bindtap="switchLanguage" 
            data-lang="en"
          >
            {{language === 'en' ? 'English/ä¸­æ–‡' : 'ä¸­æ–‡/English'}}
          </button>
        </view>
      </view>
    </view>

    <!-- Share Section -->
    <view class="settings-group">
      <view class="section-title">{{language === 'en' ? 'Share' : 'åˆ†äº«'}}</view>
      <view class="settings-item share-item no-border" bind:tap="shareWithFriends">
        <text class="item-label">{{language === 'en' ? 'Share with Friends' : 'åˆ†äº«ç»™æœ‹å‹'}}</text>
        <text class="share-icon">ğŸ“¤</text>
      </view>
      <button open-type="share" class="share-action-button" id="shareButton">{{language === 'en' ? 'Share Tasks' : 'åˆ†äº«ä»»åŠ¡'}}</button>
    </view>
  </view>

  <view class="credits">
    <text>made by ImAnVit</text>
  </view>
</view>
